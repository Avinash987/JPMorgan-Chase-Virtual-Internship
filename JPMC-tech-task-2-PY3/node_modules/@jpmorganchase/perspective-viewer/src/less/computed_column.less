/******************************************************************************
*
* Copyright (c) 2017, the Perspective Authors.
*
* This file is part of the Perspective library, distributed under the terms of
* the Apache License 2.0.  The full license can be found in the LICENSE file.
*
*/

@import "variables";

:host {
    display: none;
    font-family: var(--interface--font-family, @sans-serif-fonts);
    flex-direction: column;
    max-height: 35%;
    margin-top: 34px;
    margin-bottom: 24px;

    flex: 0 0 auto !important;

    * {
        box-sizing: border-box;
    }

    select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIwLjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA0LjkgMTAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQuOSAxMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPgoJLnN0MHtmaWxsOiM0NDQ0NDQ7fQo8L3N0eWxlPgo8dGl0bGU+YXJyb3dzPC90aXRsZT4KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIxLjQsNC43IDIuNSwzLjIgMy41LDQuNyAiLz4KPHBvbHlnb24gY2xhc3M9InN0MCIgcG9pbnRzPSIzLjUsNS4zIDIuNSw2LjggMS40LDUuMyAiLz4KPC9zdmc+Cg==)
            no-repeat 95% 50%;
        background-color: #fff;
        border: none;
        height: 24px;
        padding: 0px 0px 0px 6px;
        font-size: 12px;
    }

    &.edit {
        #psp-cc-button-delete {
            display: block !important;
        }
    }

    .psp-cc__label {
        color: @darkgray;
        font-size: 10px;
        margin-left: 8px;

        &.psp-cc__error {
            color: #cb4549 !important;
            display: none;
        }
    }

    #psp-cc__actions {
        display: flex;
        justify-content: flex-start;
        margin-right: 5px;
        margin-left: 20px;
        margin-top: 12px;
    }

    #psp-cc__body,
    .psp-cc__container {
        display: flex;
        flex-direction: column;

        &.row {
            align-items: center;
            flex-direction: row;
        }
    }

    span#psp-cc__close {
        color: @darkgray;
        position: absolute;

        &:hover {
            cursor: pointer;
        }
    }

    .psp-cc__container {
        margin: 2px 0px 10px 26px;

        &:first-of-type {
            margin-bottom: 0;
        }

        span#psp-cc__mode {
            color: #000;
            font-size: 12px;
        }

        input {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background: #fff;
            border-bottom: 1px solid @border-color;
            font-size: 12px;
            padding: 3px 4px;
            flex-basis: 500px;
        }
    }

    #psp-cc-name {
        background-color: #eee;
        border-bottom: 1px solid @border-color;
        color: #333;
        cursor: default !important;
        font-size: 12px;
        padding-left: 2px;
        width: 100%;

        &:empty:before {
            content: "New Column";
            color: @border-color;
        }

        * {
            display: inline;
        }

        br {
            display: none;
        }
    }

    .column_row() {
        font-family: monospace;
        display: flex;
    }

    .psp-label__placeholder {
        color: #ccc;
        display: inline-block;
        font-size: 12px;
        margin-left: 4px;
    }

    .psp-label__requiredType {
        margin-left: 5px;
        margin-top: -1px;
        display: inline-block;

        &.integer::before,
        &.float::before {
            .column_row();
            content: "123";
            color: #016bc6;
        }

        &.string::before {
            .column_row();
            content: "abc";
            color: #fe9292;
        }

        &.boolean::before {
            .column_row();
            content: "t/f";
            color: #999999;
        }

        &.datetime::before {
            .column_row();
            content: "mdy";
            color: #999999;
        }

        &.date::before {
            .column_row();
            content: "mdy";
            color: #999999;
        }
    }

    #psp-cc-computation-inputs {
    }

    .psp-cc-computation__input-column {
        box-sizing: border-box;
        display: flex;
        align-items: center;
        border-bottom: 1px solid #ccc;
        margin-top: 5px;
        height: 23px;
        width: 100%;

        perspective-row {
            margin-left: -26px;
            margin-right: -5px;
            width: calc(~"100% + 26px");
        }

        &.dropping {
            background-color: rgb(240, 240, 255) !important;
            border: 1px solid #1078d1 !important;
            cursor: copy !important;

            perspective-row {
                display: none !important;
                pointer-events: none;
            }
        }

        &.dropped {
            border: 0;
            background: none;
        }
    }

    perspective-row {
        margin-bottom: 2px;
        --row_draggable-overflow: hidden;
        --name-before-display: inline-block;
        --is_visible-display: inline-block;
        --row_draggable-padding: 2px 10px 2px 2px;
        --row_close-display: none;
        --psp_row-margin: 0 5px 0 0;
        --column_name-max-width: 180px;
    }

    perspective-row[drop-target] {
        --row_draggable_children-opacity: 0;
    }

    .psp-cc__content {
        align-items: center;
        display: flex;
        margin-top: 5px;

        &.psp-cc__content--nomargin {
            margin-top: 0;
        }
    }

    #psp-cc-computation__type {
        box-sizing: border-box;
        display: flex;
        font-family: @monospace-fonts;
        flex-direction: column;
        font-size: 12px;
        padding-right: 3px;
        padding-left: 6px;
        background: eee;
        height: 24px;
        text-align: center;
        padding-top: 4px;

        .datetime,
        .date,
        .boolean {
            color: #999;
        }

        .float,
        .integer {
            color: #016bc6;
        }

        .string {
            color: #fe9292;
        }
    }

    #psp-cc-computation__select {
        margin-left: auto;
        width: 100%;
        background-color: #eee;
        font-size: 10px;
        border-bottom: none;
        color: #666;
    }

    #psp-cc-computation__drop-target-hover {
        display: none;
    }

    .psp-cc__button {
        border-radius: 0;
        border-bottom: 1px solid @border-color;
        border-left: 0;
        border-right: 0;
        border-top: 0;
        font-size: 12px;
        margin-left: 6px;
        padding: 2px 5px;
        width: 45px;

        &:hover {
            cursor: pointer;
        }

        &[disabled] {
            background: @darkgray !important;
            color: @lightgray !important;
            cursor: not-allowed;
            border-bottom-color: #000 !important;
            opacity: 0.5;
        }

        &#psp-cc-button-delete {
            background: #e76056;
            border-bottom-color: #bf4d45;
            color: #fff;
            display: none;

            &:active {
                background: #bf4d45;
                border-bottom-color: #9d3f39;
            }
        }

        &#psp-cc-button-save {
            background: #0171d2;
            border-bottom-color: #0160b1;
            color: #fff;
            height: 22px;

            &:active {
                background: #0160b1;
                border-bottom-color: #014986;
            }
        }
    }
}
